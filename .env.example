# ═══════════════════════════════════════════════════════════════
# AnatoView — Environment Variables
# ═══════════════════════════════════════════════════════════════
#
# Copy this file to .env and fill in your values.
# The .env file is gitignored and should never be committed.
#
# For development, most defaults work with docker compose up.
# For production, ALL values must be set.
# ═══════════════════════════════════════════════════════════════

# ─── General ──────────────────────────────────────────────────
NODE_ENV=production
PORT=3001

# ─── Database (PostgreSQL) ────────────────────────────────────
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://anatoview:CHANGE_ME@postgres:5432/anatoview

# ─── Cache / Sessions (Redis) ────────────────────────────────
REDIS_URL=redis://redis:6379

# ─── Authentication ──────────────────────────────────────────
# IMPORTANT: Generate a strong random secret (min 32 chars).
# Example: openssl rand -hex 32
JWT_SECRET=CHANGE_ME_TO_A_RANDOM_STRING

# ─── Canvas LTI 1.3 Integration ──────────────────────────────
# These values come from your Canvas Developer Key configuration.
# See: https://canvas.instructure.com/doc/api/file.lti_dev_key_config.html
LTI_KEY_ID=your-lti-key-id
LTI_CLIENT_ID=your-canvas-developer-key-client-id
CANVAS_BASE_URL=https://your-institution.instructure.com

# Platform-specific LTI URLs (set by Canvas — usually auto-configured)
# LTI_PLATFORM_AUTH_ENDPOINT=https://your-institution.instructure.com/api/lti/authorize_redirect
# LTI_PLATFORM_TOKEN_ENDPOINT=https://your-institution.instructure.com/login/oauth2/token
# LTI_PLATFORM_JWKS_ENDPOINT=https://your-institution.instructure.com/api/lti/security/jwks

# MongoDB for ltijs state storage (refresh tokens, nonces, etc.)
# LTI_DB_URL=mongodb://mongo:27017/ltijs

# ─── Object Storage (S3 / Compatible) ────────────────────────
# For AWS S3:
#   S3_ENDPOINT=https://s3.amazonaws.com
# For LocalStack (dev):
#   S3_ENDPOINT=http://localstack:4566
# For MinIO or other S3-compatible:
#   S3_ENDPOINT=http://minio:9000
S3_ENDPOINT=https://s3.amazonaws.com
S3_BUCKET=anatoview-assets
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=us-east-1

# ─── Frontend URL ────────────────────────────────────────────
# The public URL where the frontend is accessible.
# Used for LTI redirect URIs and CORS configuration.
FRONTEND_URL=https://anatoview.youruni.edu

# ─── Optional: Email Notifications ──────────────────────────
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=noreply@youruni.edu
# SMTP_PASS=your-app-password
# SMTP_FROM=AnatoView <noreply@youruni.edu>

# ─── Optional: Monitoring ────────────────────────────────────
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# LOG_LEVEL=info
